# StelX Drone Surveillance Configuration
# Edit these settings to customize behavior

# Vehicle Detection Settings
detection:
  model: "yolo11s.pt"                # Base model (or use custom: weights/vehicle_detector.pt)
  person_model: "weights/person_detector.pt"   # Custom trained person detector
  vehicle_model: "weights/vehicle_detector.pt" # Custom trained vehicle detector  
  plate_model: "weights/plate_detector.pt"     # Custom trained plate detector
  confidence_threshold: 0.25         # Balanced threshold for accuracy
  iou_threshold: 0.45                # Overlap threshold for NMS
  device: "mps"                      # Device: mps (Apple GPU), cpu, cuda
  classes: [0, 2, 5, 7]              # COCO classes: 0=person, 2=car, 5=bus, 7=truck


# Image Preprocessing (for high-altitude/low-quality images)
preprocessing:
  enabled: true                   # Enable image enhancement
  clahe:                          # Contrast enhancement
    enabled: true
    clip_limit: 2.0
    tile_grid_size: 8
  sharpening:                     # Edge enhancement
    enabled: true
    kernel_size: 3
    amount: 1.0
  upscaling:                      # Upscale low-res inputs
    enabled: true
    min_dimension: 640            # Upscale if smaller than this
    target_dimension: 1280        # Target size after upscaling

# Crowd Monitoring Settings
crowd_monitoring:
  enabled: true                   # Enable crowd detection and counting
  density_thresholds:
    low: 5                        # Below this count = low density
    medium: 15                    # Below this count = medium density (above = high)

# SAHI - Slicing Aided Hyper Inference (for small objects at high altitude)
sahi:
  enabled: true                   # Enable sliced inference
  slice_height: 512               # Height of each slice
  slice_width: 512                # Width of each slice
  overlap_height_ratio: 0.2       # Overlap between vertical slices
  overlap_width_ratio: 0.2        # Overlap between horizontal slices
  postprocess_type: "NMS"         # NMS or GREEDYNMM
  postprocess_match_threshold: 0.5

# License Plate Recognition
plate_recognition:
  enabled: true                 # Set false to disable (faster processing)
  ocr_languages:
    - en
  confidence_threshold: 0.30    # Min OCR confidence

# Object Tracking
tracking:
  algorithm: "deepsort"
  max_age: 30                   # Frames to keep track after occlusion
  min_hits: 3                   # Min detections before confirming track
  iou_threshold: 0.3

# Video Input
video:
  source: 0                     # 0=webcam, or path to video/RTSP
  width: 1280
  height: 720
  fps: 30

# Dashboard Server
server:
  host: "0.0.0.0"
  port: 8000
  ocr_every_n_frames: 10        # Run OCR every N frames (for real-time)

# Visualization
visualization:
  show_confidence: true
  show_track_id: true
  show_trajectory: true
  bbox_thickness: 2
